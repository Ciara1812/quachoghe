<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Valentine</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
    :root{
    --bg-dark:#1a0f0c;
    --bg-mid:#231512;
    --bg-light:#2b1814;
}

body{
    margin:0;
    min-height:100vh;

    background:linear-gradient(
        135deg,
        #120908,
        #1a0f0d,
        #20110f
    );
    background-size:200% 200%;
    animation:gradientMove 18s ease infinite;

    overflow-x:hidden;
}




@keyframes candleFlicker{
    0%{ opacity:0.45; transform:scale(1); }
    50%{ opacity:0.6; transform:scale(1.02); }
    100%{ opacity:0.5; transform:scale(0.99); }
}

/* Gradient animation */
@keyframes gradientMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* Soft glow lights */
body::before,
body::after{
    content:"";
    position:absolute;
    width:600px;
    height:600px;
    border-radius:50%;
    filter:blur(180px);
    opacity:0.25;
    z-index:-1;
}

body::before{
    background:#7a1c2f;
    top:-200px;
    left:-200px;
}

body::after{
    background:#4a0f1d;
    bottom:-200px;
    right:-200px;
}


/* ===== INTRO ===== */
.intro{
    position:fixed;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;

    background: linear-gradient(
        135deg,
        #100706,
        #170c0a,
        #1e100d
    );

    backdrop-filter: blur(4px);
    z-index:999;
}



.introText{
    font-size:60px;
    font-family:'Great Vibes',cursive;
    color:#e8d7b5;
    letter-spacing:3px;
}


@keyframes fadeIn{
    to{
        opacity:1;
        transform:translateY(0);
    }
}

/* MAIN */
.main{
    position:relative;
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    opacity:0;
    text-align:center;
    transition:2s;
}

.main.show{
    opacity:1;
}

h1{
    font-family:'Great Vibes',cursive;
    font-size:70px;
    color:#e8d7b5;
    margin-bottom:40px;
    text-shadow:0 4px 20px rgba(0,0,0,0.6);
}

/* ENVELOPE */
.envelope{
    position:relative;
    width:300px;
    height:200px;
    background:linear-gradient(145deg,#e6d2b3,#d7b892);
    border:1px solid #9b7b5c;
    cursor:pointer;
    box-shadow:
        0 25px 60px rgba(0,0,0,0.6),
        inset 0 0 25px rgba(120,80,50,0.15);
    transition:transform 1.5s ease;
}

.envelope.zoom{
    transform:scale(1.2);
}

.flap{
    position:absolute;
    width:100%;
    height:100px;
    background:#d2b08c;
    top:0;
    left:0;
    transform-origin:top;
    transition:transform 0.8s ease;
    clip-path:polygon(0 0,100% 0,50% 100%);
}

.envelope.open .flap{
    transform:rotateX(160deg);
}

.heart{
    position:absolute;
    top:75px;
    left:50%;
    transform:translateX(-50%);
    font-size:32px;
    color:#8b3a3a;
    animation:heartbeat 2s infinite;
}

@keyframes heartbeat{
    0%{transform:translateX(-50%) scale(1);}
    50%{transform:translateX(-50%) scale(1.2);}
    100%{transform:translateX(-50%) scale(1);}
}

/* SPARKLES */
.sparkle{
    position:absolute;
    width:4px;
    height:4px;
    background:white;
    border-radius:50%;
    opacity:0.8;
    animation:floatUp 6s linear infinite;
}

.floating-heart{
    position:absolute;
    font-size:20px;
    animation:floatUp 7s linear infinite;
    opacity:0.6;
}

@keyframes floatUp{
    from{ transform:translateY(100vh); opacity:1;}
    to{ transform:translateY(-10vh); opacity:0;}
}

/* ===== LOVE PAGE ===== */
.lovePage{
    position:fixed;
    inset:0;
    background: linear-gradient(-45deg, 
        #120908,
        #1a0f0d,
        #221311,
        #160a09
    );
    background-size: 400% 400%;
    animation: gradientFlow 20s linear infinite;

    display:flex;
    justify-content:center;
    align-items:center;
    opacity:0;
    pointer-events:none;
    transition:opacity 1.2s ease;
    z-index:50;
}

@keyframes gradientFlow{
    0%{
        background-position: 0% 50%;
    }
    50%{
        background-position: 100% 50%;
    }
    100%{
        background-position: 0% 50%;
    }
}




h1{
    font-family:'Great Vibes',cursive;
    font-size:70px;
    color:#e8cfc4;
    text-shadow:0 4px 25px rgba(0,0,0,0.6);
}
.lovePage h2{
    font-family:'Great Vibes',cursive;
    font-size:65px;
    margin-bottom:30px;
    color:#0d0c0f;
    text-shadow:0 4px 25px rgba(0,0,0,0.5);
}

.loveText{
    font-family:'Cormorant Garamond',serif;
    font-size:30px;
    line-height:1.9;
    letter-spacing:0.5px;
}




.lovePage p{
    max-width:500px;
    font-size:18px;
    color:#5e3b2c;
    text-align:center;
}


/* ===== BACK BUTTON ===== */
.backBtn{
    position:absolute;
    bottom:25px;
    top:25px;
    left:25px;
    width:55px;
    height:55px;
    background:transparent;
    border:none;
    outline:none;
    cursor:pointer;
    display:flex;
    justify-content:center;
    align-items:center;
    z-index:1000;
}

.backBtn svg{
    width:32px;
    height:32px;
    stroke:#ff4f81;
    stroke-width:3;
    fill:none;
    transition:0.35s ease;
}

.backBtn:hover svg{
    stroke:#ff2f6d;
    transform:translateX(-6px);
    filter:drop-shadow(0 0 8px rgba(255,80,130,0.6));
}

.backBtn:active svg{
    transform:scale(0.9);
}

/* NAV HEART BUTTON + TRANSITION */
#navHeartBtn{
    position:fixed;
    right:20px;
    bottom:20px;
    width:64px;
    height:64px;
    border-radius:50%;
    background:linear-gradient(180deg,#8b2f3f,#5e1f2b);
    color:white;
    font-size:28px;
    border:none;
    display:none; /* hidden until envelope is opened */
    align-items:center;
    justify-content:center;
    cursor:pointer;
    z-index:1100;
    box-shadow:0 10px 30px rgba(0,0,0,0.5);
    transform-origin:center;
    transition:transform .22s ease, box-shadow .22s ease;
}
#navHeartBtn.show{ display:flex; }
#navHeartBtn:hover{ transform:scale(1.08); box-shadow:0 18px 40px rgba(255,80,140,0.24); }
#navHeartBtn:active{ transform:scale(.96); }

#navHeartBtn.pulse{ animation:navPulse 1.6s infinite; }
@keyframes navPulse{ 0%{ transform:scale(1); } 50%{ transform:scale(1.06); } 100%{ transform:scale(1); } }

/* full-screen overlay used during transition */
#transitionOverlay{
    position:fixed;
    inset:0; 
    background:radial-gradient(circle at 50% 50%, rgba(120,60,30,0.6), rgba(30,10,5,0.95));
    opacity:0; 
    pointer-events:none; 
    transition:opacity .8s ease; 
    z-index:1200; 
    mix-blend-mode:screen;
}
#transitionOverlay.show{ opacity:1; pointer-events:auto; }

.envelope::after{
    content:"";
    position:absolute;
    inset:-3px;
    pointer-events:none;
    border-radius:4px;
    background:linear-gradient(180deg,#5a2a14,#3b160c);
    opacity:0.25;
    filter:blur(4px);
}

.paper{
    transform:translateY(40px) scale(0.95);
    opacity:0;
    transition:all 1.1s ease;
    background: linear-gradient(180deg,#f2e8dc,#e8d8c2);
    padding:50px;
    max-width:600px;
    border-radius:4px;
    box-shadow:
        0 30px 80px rgba(0,0,0,0.7),
        inset 0 0 60px rgba(120,80,40,0.15);
    color:#3b2a25;
    transition: color 1.2s ease;
    text-shadow:none;

    font-size:40px;
    line-height:1.8;
    position:relative;
    margin:0 auto;
    text-align:center;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:60;

}

/* Ch√°y vi·ªÅn nh·∫π */
.paper::before{
    content:"";
    position:absolute;
    inset:-5px;
    background:radial-gradient(circle at 20% 20%, #5a3a25, transparent 60%);
    opacity:0.2;
    filter:blur(6px);
    z-index:-1;
}

.vignette{
    position:fixed;
    inset:0;
    pointer-events:none;
    background: radial-gradient(
        circle at center,
        transparent 55%,
        rgba(0,0,0,0.75) 100%
    );
    z-index:10;
}

.wrapper{
    display:flex;
    justify-content:center;
    align-items:center;
}

.centerBox{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
}

@keyframes warmReveal{
    0%{ transform:scale(1.03); opacity:0; }
    100%{ transform:scale(1); opacity:1; }
}

.lovePage.show{
    opacity:1;
    pointer-events:auto;
    animation:warmReveal 1.2s ease forwards;
}

.lovePage.show .paper{
    transform:translateY(0) scale(1);
    opacity:1;

}



.envelope::before{
    content:"";
    position:absolute;
    inset:-20px;
    border-radius:6px;
    background:radial-gradient(circle at center,
        rgba(255,200,150,0.4),
        transparent 70%);
    opacity:0;
    transition:opacity 1s ease;
}

.envelope.open::before{
    opacity:1;
}


</style>
</head>

<body>
<div class="vignette"></div>

<!-- INTRO -->
<div class="intro" id="introScreen">
    <div class="introText" id="nameText"></div>
</div>

<!-- MAIN -->
<div class="main" id="mainContent"> 
    <h1>Happy Valentine's Day!</h1>
    <div class="wrapper">
      
      <div class="envelope" id="envelope">
         <div class="flap"></div>
         <div class="heart">ü§é</div>
      </div>
    </div>
</div>

<!-- LOVE PAGE -->
<div class="lovePage" id="lovePage">
<button class="backBtn" id="backBtn">
    <svg viewBox="0 0 24 24">
        <path d="M15 6L9 12L15 18" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
</button>

<div class="paper">
    <h2>For my baby :>> </h2>
    <p class="loveText">

    Today‚Äôs Valentine‚Äôs Dayyy!! <br> 

I just wanna say I hope my bbg is always happy and doing okay üòö. <br>
 I hope you keep that cute smile, don't overthink too much and always remember how loved you are.<br>

I hope all the good things find their way to you. <br>
And I hope thattt‚Ä¶ <br>
 we'll stay together for a reallyyy, reallyyy long timeeee<br>

Forever üòõ<br>

I love you mwah mwah mwahhh.
</p>
</div>

<!-- AUDIO -->
<!-- heart nav button + overlay -->
<button id="navHeartBtn" title="Go to next scene">üíò</button>
<div id="transitionOverlay"></div>

<audio id="bgMusic" autoplay loop playsinline preload="auto">
    <source src="iloveyou3000.mp3" type="audio/mpeg">
</audio>
<button id="playAudioBtn" aria-label="Play background music">Play music</button>
<audio id="whoosh" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>

<script>
const loverName = " Helo the love of my life :P "; 

const introScreen = document.getElementById("introScreen");
const nameText = document.getElementById("nameText");
const main = document.getElementById("mainContent");
const envelope = document.getElementById("envelope");
const bgMusic = document.getElementById("bgMusic");
const whoosh = document.getElementById("whoosh");
const lovePage = document.getElementById("lovePage");
const backBtn = document.getElementById("backBtn");
const navHeartBtn = document.getElementById("navHeartBtn");
const transitionOverlay = document.getElementById("transitionOverlay");

nameText.innerText = loverName;

// Autoplay handling: attempt to play; if blocked, show a play button for user gesture
const _bgMusic = document.getElementById('bgMusic');
const _playBtn = document.getElementById('playAudioBtn');

function fadeInMusic(targetVol = 0.4, step = 0.02, interval = 200){
    if(!_bgMusic) return;
    _bgMusic.volume = 0;
    let vol = 0;
    _bgMusic.play().catch(()=>{});
    const fade = setInterval(()=>{
        if(vol < targetVol){ vol += step; _bgMusic.volume = Math.min(vol, targetVol); }
        else clearInterval(fade);
    }, interval);
}

function tryAutoPlayAudio(){
    if(!_bgMusic) return;
    const p = _bgMusic.play();
    if(p !== undefined){
        p.then(()=>{
            if(_playBtn) _playBtn.style.display = 'none';
            fadeInMusic();
        }).catch(()=>{
            if(_playBtn) _playBtn.style.display = 'block';
        });
    }
}

if(_playBtn){
    _playBtn.addEventListener('click', ()=>{
        fadeInMusic();
        _playBtn.style.display = 'none';
    });
}

document.addEventListener('DOMContentLoaded', tryAutoPlayAudio);

/* Hide intro */
setTimeout(()=>{
    introScreen.style.opacity="0";
    setTimeout(()=>{
        introScreen.style.display="none";
        main.classList.add("show");
    },1500);
},3000);

/* Sparkles */
function createSparkle(){
    const s=document.createElement("div");
    s.className="sparkle";
    s.style.left=Math.random()*100+"vw";
    s.style.animationDuration=(4+Math.random()*3)+"s";
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),7000);
}
setInterval(createSparkle,900);


/* Floating hearts */
function createHeart(){
    const heart=document.createElement("div");
    heart.className="floating-heart";
    heart.innerText="ü§é";

    heart.style.left=Math.random()*100+"vw";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),8000);
}
setInterval(createHeart,2000);


/* OPEN ENVELOPE */
envelope.addEventListener("click",()=>{
    whoosh.play();
    envelope.classList.add("open","zoom");

    setTimeout(()=>{
        main.style.opacity="0";
    },1000);

    setTimeout(()=>{
        main.style.display="none";
        lovePage.classList.add("show");
        // show nav heart button after opening the letter
        if(navHeartBtn){
            navHeartBtn.classList.add('show');
            setTimeout(()=>navHeartBtn.classList.add('pulse'),300);
        }
    },2000);
});

/* BACK */
backBtn.addEventListener("click",()=>{
    whoosh.play();
    lovePage.classList.remove("show");

    setTimeout(()=>{
        main.style.display="flex";
        envelope.classList.remove("open","zoom");
        setTimeout(()=>main.style.opacity="1",50);
    },800);
});

/* NAV HEART: transition to another page with effect */
if(navHeartBtn){
    navHeartBtn.addEventListener('click', ()=>{
        // play whoosh and show overlay then navigate
        if(whoosh) try{ whoosh.currentTime=0; whoosh.play(); }catch(e){}
        navHeartBtn.disabled = true;
        navHeartBtn.classList.remove('pulse');
        transitionOverlay.classList.add('show');
        // fade out music while overlay appears, then navigate
        fadeOutAndNavigate('gallery 10.html', 600);
    });
}

// Smoothly reduce background music volume over `duration` ms, then navigate
function fadeOutAndNavigate(url, duration = 600){
    if(!_bgMusic){ window.location.href = url; return; }
    try{
        const startVol = _bgMusic.volume || 0.4;
        const steps = Math.max(8, Math.ceil(duration / 50));
        const stepTime = duration / steps;
        let currentStep = 0;
        const volStep = startVol / steps;
        const t = setInterval(()=>{
            currentStep++;
            const newVol = Math.max(0, startVol - volStep * currentStep);
            _bgMusic.volume = newVol;
            if(currentStep >= steps){
                clearInterval(t);
                try{ _bgMusic.pause(); }catch(e){}
                window.location.href = url;
            }
        }, stepTime);
    }catch(e){ window.location.href = url; }
}
</script>

</body>
</html>

